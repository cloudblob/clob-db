# cloudblob-store

Node document store interface using cloud persistent storage as backend(Azure Blob storage, AWS S3 or Google Cloud Storage).

## Overview

Use `cloudblob-store` as a hobbyist, for prototyping or even for scaling up & out. Our platform is completely open source, so when you find our service doesn't offer enough, export your project and host our stack yourself!

Offers indexing & search capabilities out the box through the help for libraries like, FlexSearch, Bulksearch and Elasticlunr.

## Why
Provider agnostic. You can use any of the big cloud service providers like Azure, AWS or Google Cloud. If none of these suit you, you can also host your own storage solution using libraries like MinIO.

## Example Usage

```javascript
var Datastore = require('@cloudblob/store');
var AWS = require('@cloudblob/store/storage');


var config = {
    // AWS-sdk s3 client parameters
    accessKeyId: "xxx...",
    secretAccessKey: "xxx..."
}

const store = new Datastore({
  // the db name here is the bucket name
  db: 'example-database',
  storage: new AWS(config),
  // specify the namespaces and their indexer class, each namespace can use a different indexer
  // so you can optimise for different types of data
  namespaces: {
    // the parameters for the indexer are (fields array, unique ref)
    'user': new Flexsearch(['name', 'about', 'age'], 'ref')
  }
});

var doc = {
    name: "John Doe",
    about: "I'm a deceased person",
    age: '30'
}

// save a document, it returns a promise that resolves the saved document (including it's autogenerated unique reference)
store.put('user', doc).then(console.log)

// index the document
store.index('user', doc).then(console.log)

// read the document
store.get('user', 'some_doc_key').then(console.log)

// search namespace index (returns key only by default)
store.filter('user', 'John Doe').then(console.log)

// list namespace documents as a paginated response
store.list('user').then(console.log)
```

